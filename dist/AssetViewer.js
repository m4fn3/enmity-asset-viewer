function P(e){window.enmity.plugins.registerPlugin(e)}function D(e){return window.enmity.plugins.getPlugin(e)}var S;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(S||(S={}));var u;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(u||(u={}));var d;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(d||(d={}));var v;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(v||(v={}));var w;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(w||(w={}));var y;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(y||(y={}));function L(e,o){window.enmity.commands.registerCommands(e,o)}function V(e){window.enmity.commands.unregisterCommands(e)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const U=window.enmity.modules.common.Toasts,b=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token;const f=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const B=window.enmity.modules.common.Navigation,G=window.enmity.modules.common.NavigationNative,F=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const H=window.enmity.modules.common.Linking,W=window.enmity.modules.common.StyleSheet,j=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function E(e,o,s){return window.enmity.settings.getBoolean(e,o,s)}var A="AssetViewer",Y="0.2.2",K="Viewer of assets provided by the Enmity Asset API",$=[{name:"Invoked",id:"174944321601142784"}],z={name:A,version:Y,description:K,authors:$};function N(...e){return window.enmity.modules.getByProps(...e)}function q(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const J=N("setString"),X=(e,o)=>o.localeCompare(e,void 0,{numeric:!0})===1,R=(e,o,s)=>e.replace("github.com","raw.githubusercontent.com")+"/"+o+"/"+s,Q=e=>e.split(`
`).filter(o=>!(o.startsWith("#")||o==="")).map(o=>o.replace("- ","")).join(`
`),T=(e,o)=>e.split("## "+o)[0].split(`
`).filter(s=>!s.startsWith("<")).join(`
`),Z=["\u267B","\u{1F528}","\u26B0\uFE0F","\u{1F4DD}","\u{1F516}","\u{1F527}","\u{1F9D1}\u200D\u{1F4BB}"],O=e=>e.split(`
`).filter(o=>!Z.some(s=>s.charCodeAt(1)==o.charCodeAt(1))).join(`
`),p=(e,o="master",s=!0)=>{const l=R(e,o,"manifest.json");return new Promise((r,a)=>{f.get(l+"?"+Math.floor(Math.random()*100)).then(c=>{const m=JSON.parse(c.text),h=D(m.name);X(h.version,m.version)?(s&&f.get(R(e,o,"CHANGELOG.md")+"?"+Math.floor(Math.random()*100)).then(M=>{const x=T(M.text,h.version),C=Q(x),k=O(C);b.show({title:"Enmity AssetViewer",body:`An update to **v${m.version}** is available on [GitHub](${e}/releases/tag/latest)

**__Changelog__:**
${k}`,confirmText:"Copy URL",cancelText:"Close",onConfirm:()=>J.setString(e+"/releases/download/latest/"+m.name+".js")})}),r({version:m.version})):a()}).catch(c=>{c.status===404&&b.show({title:"Enmity AssetViewer",body:"Failed to check for updates, please update manually from GitHub",confirmText:"Open GitHub",cancelText:"Close",onConfirm:()=>H.openURL(e+"/releases/tag/latest")}),a()})})},{components:t}=window.enmity;t.Alert;const ee=t.Button;t.FlatList;const te=t.Image;t.ImageBackground,t.KeyboardAvoidingView,t.Modal,t.Pressable,t.RefreshControl;const oe=t.ScrollView;t.SectionList,t.StatusBar,t.StyleSheet,t.Switch,t.Text,t.TextInput,t.TouchableHighlight,t.TouchableOpacity,t.TouchableWithoutFeedback,t.Touchable;const ne=t.View;t.VirtualizedList,t.Form,t.FormArrow,t.FormCTA,t.FormCTAButton,t.FormCardSection,t.FormCheckbox,t.FormDivider,t.FormHint,t.FormIcon,t.FormInput,t.FormLabel,t.FormRadio;const g=t.FormRow,se=t.FormSection;t.FormSelect,t.FormSubLabel;const _=t.FormSwitch;t.FormTernaryCheckBox,t.FormText,t.FormTextColors,t.FormTextSizes;var re=({settings:e})=>n.createElement(n.Fragment,null,n.createElement(g,{label:"Check for updates",trailing:n.createElement(_,{value:e.getBoolean("checkForUpdates",!0),onValueChange:()=>e.toggle("checkForUpdates",!0)})}),n.createElement(se,{title:"Experimental features"},n.createElement(g,{label:"Search in path",trailing:n.createElement(_,{value:e.getBoolean("searchInPath",!1),onValueChange:()=>e.toggle("searchInPath",!1)})})));const I=F.createStackNavigator(),{ThemeColorMap:i}=j;var ie=({name:e="Page",component:o=ne}={})=>{const s=W.createThemedStyleSheet({container:{backgroundColor:i.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:i.BACKGROUND_MOBILE_PRIMARY,color:i.TEXT_NORMAL},header:{backgroundColor:i.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerTitleContainer:{color:i.HEADER_PRIMARY},close:{color:i.HEADER_PRIMARY}});return n.createElement(G.NavigationContainer,{independent:!0},n.createElement(I.Navigator,{initialRouteName:e,style:s.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:s.cardStyle,headerStyle:s.header,headerTitleContainerStyle:s.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},n.createElement(I.Screen,{name:e,component:o,options:{headerTitleStyle:{color:"white"},headerLeft:()=>n.createElement(ee,{color:s.close.color,title:"Close",onPress:()=>B.pop()}),...F.TransitionPresets.ModalSlideFromBottomIOS}})))};function ae(e){return window.enmity.assets.find(e)}function me(e){return window.enmity.assets.getIDByName(e)}const le=["icon","icons","toast","status","custom_status","emoji_picker","perks","video_calls","guild_scheduled_events","navigator","media","invite_expiration_notice","directory_channels","guild_home","instant_invite","guild_sidebar","hub","tier_icons","guild_profile","main_tabs","community","discover"];var ce=e=>e.name.startsWith("ic")||e.name.includes("icon")?!0:e.name.endsWith("splash")||e.name.endsWith("upsell")||e.name.includes("header")||e.name.endsWith("illustration")?!1:le.some(o=>(e.httpServerLocation+"/").includes("/"+o+"/"));const ue=N("setString"),de=me("ic_message_copy"),we=q("StaticSearchBarContainer");var ge=()=>{const[e,o]=n.useState([]),[s,l]=n.useState([]);return n.useEffect(()=>{let r=[];ae(a=>(ce(a)&&r.push(a),!1)),o(r)},[]),n.createElement(n.Fragment,null,n.createElement(we,{placeholder:"Search Icons by Name",onChangeText:r=>l(r)}),n.createElement(oe,null,e.filter(r=>(r.name+"/"+(E("AssetViewer","searchInPath",!1)?r.httpServerLocation:"")).includes(s)).map(r=>n.createElement(g,{label:r.name,trailing:n.createElement(te,{source:r.id,style:{resizeMode:"contain",width:24,height:24}}),onPress:()=>{ue.setString(r.name),U.open({content:"Copied to clipboard",source:de})}}))))};const he={id:"assets-command",name:"assets",displayName:"assets",description:"Show Assets",displayDescription:"Browse Assets provided by the Asset API",type:u.Chat,inputType:d.BuiltInText,options:[{name:"type",displayName:"type",description:"Asset Type",displayDescription:"Type of the Assets",type:w.String,required:!0,choices:[{name:"icons",displayName:"icons",value:"icons"}]}],execute:async function(e,o){switch(e[0].value){case"icons":B.push(ie,{component:ge,name:"Asset Viewer: Icons"});break}return{}}},Se={...z,onStart(){E("AssetViewer","checkForUpdates",!0)&&p("https://github.com/devicarus/enmity-asset-viewer"),L("asset-viewer",[he])},onStop(){V("asset-viewer")},getSettingsPanel({settings:e}){return n.createElement(re,{settings:e})}};P(Se);
